
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.7">
    
    
      
        <title>Boot process - Free60 Wiki archive</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.19753c6b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#boot-process" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Free60 Wiki archive" class="md-header-nav__button md-logo" aria-label="Free60 Wiki archive">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Free60 Wiki archive
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Boot process
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Free60 Wiki archive" class="md-nav__button md-logo" aria-label="Free60 Wiki archive">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Free60 Wiki archive
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Category_Xbox360_Hardware/" class="md-nav__link">
      Hardware
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Category_Xbox360_System_Software/" class="md-nav__link">
      System Software
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Category_Xbox360_Homebrew_Software/" class="md-nav__link">
      Homebrew Software
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Category_Xbox360_Linux/" class="md-nav__link">
      Linux
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Category_Xbox360_Development/" class="md-nav__link">
      Development
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Category_Support/" class="md-nav__link">
      Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../%21TODO/" class="md-nav__link">
      ToDo
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#retail" class="md-nav__link">
    Retail
  </a>
  
    <nav class="md-nav" aria-label="Retail">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1bl-inside-cpu" class="md-nav__link">
    1BL (Inside CPU)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cb" class="md-nav__link">
    CB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cd" class="md-nav__link">
    CD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cf" class="md-nav__link">
    CF
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#devkit" class="md-nav__link">
    Devkit
  </a>
  
    <nav class="md-nav" aria-label="Devkit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernel" class="md-nav__link">
    Kernel
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-os-executables" class="md-nav__link">
    Core OS Executables
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="boot-process">Boot process</h1>
<p>This page details the boot process used in the Xbox 360. The process is
slightly different between Devkit/Retail and certain boxes which have a
secondary CB loader (trinity/some jaspers)</p>
<h2 id="retail">Retail</h2>
<p>In Summary:</p>
<ul>
<li>Slim: 1BL -&gt; CB_A -&gt; CB_B -&gt; CD -&gt; CF -&gt; CD -&gt; HV -&gt; Kernel -&gt; Dashboard</li>
<li>Phat (older): 1BL -&gt; CB -&gt; CD -&gt; CF -&gt; CD -&gt; HV -&gt; Kernel -&gt; Dashboard</li>
<li>Phat (newer): 1BL -&gt; CB_A -&gt; CB_B -&gt; CD -&gt; CF -&gt; CD -&gt; HV -&gt; Kernel -&gt; Dashboard</li>
</ul>
<h3 id="1bl-inside-cpu">1BL (Inside CPU)</h3>
<p>Loads and decrypts CB(_A) into ram, it computes a RotSumSha1 of CB(_A)
and uses it to verify its RSA signature. If the signature is valid, 1BL
jumps to CB(_A).</p>
<p>You can find reversed pseudocode of the 1bl here: <a href="../1bl_Code">1BL Code</a></p>
<h3 id="cb">CB</h3>
<p><strong>SLIMS ONLY</strong>: CB_A loads and decrypts CB_B into ram, it computes a
RotSumSha1 of CB_B and checks it against the known hash. If it matches
CB_A jumps to CB_B.</p>
<p>CB(_B) starts up a virtual machine, which does:</p>
<pre><code>- initializes the PCI Bridge
- disables the GPU PCIE JTAG test port
- initializes the serial port
- talks to the SMC to clear the "handshake" bit
- initializes memory
- generates RROD if memory init fails
</code></pre>
<p>CB(_B) loads and decrypts CD into ram, it computes a RotSumSha1 of CD
and checks it against the known hash. If it matches CB(_B) jumps to CD.</p>
<p>Methods to dump the CB bootloaders and examples of them reversed can be
found here: <a href="../CB_Code">CB Code</a></p>
<h3 id="cd">CD</h3>
<p>Loads and decrypts CE into ram, computes a RotSumSha1 of CE. If it
matches the known hash, it decompresses the LZX compressed base
kernel.
It then checks for patch slots. If it finds one, it will load and
decrypt the corresponding CF bootloader for that patch. It then computes
a RotSumSha1 of CF and uses it to verify the CF loaders signature. If
the signature is valid, CD stays in memory but jumps to CF.</p>
<p>There can be up to 2 CF/CG pairs for patching the kernel.</p>
<h3 id="cf">CF</h3>
<p>Loads CG into memory by reading the CG data in the NAND header and then
reads the rest of the CG data from the CG blocks specified in CF header.
It then decrypts the CG in memory using the key generated from
decrypting CF. To verify it, it computes a RotSumSha1 and checks it
against the known hash. If it matches, it uses LZX delta decompress to
apply the patch to the base kernel in memory. Once its done, it jumps
back to CD and once CD has finished up, it jumps to the reset vector in
the <a href="../Hypervisor">Hypervisor</a>.</p>
<h2 id="devkit">Devkit</h2>
<p>In Summary:</p>
<ul>
<li>Phat: 1BL -&gt; SB -&gt; SC -&gt; SD -&gt; HV -&gt; Kernel -&gt; Dashboard</li>
</ul>
<p>The devkit bootloaders are nearly identical to their retail
counterparts; however instead of hardcoded hash checks, devkits verify
bootloaders SD and SE by signature checks.</p>
<p>The SC bootloader is the hardware initialization virtual machine run by
SB.</p>
<p>Because devkits do not update over the air, they use a pre-patched SE
(HV + kernel) bootloader) without delta patching CF/CG pairs.</p>
<h3 id="kernel">Kernel</h3>
<p>Once control is handed off to the kernel, as denoted by the
<a href="../POST">POST</a> output, the kernel does the following (on
development systems):</p>
<ul>
<li>Initialize memory manager</li>
<li>Initialize stack(s)</li>
<li>Initialize object system (?)</li>
<li>Initialize phase 1 thread (?)</li>
<li>Phase 1 initialization and processors initialization</li>
<li>Initialize keyvault</li>
<li>Initialize <a href="https://en.wikipedia.org/wiki/HAL_(software)">HAL</a> phase 1</li>
<li>Initialize SFC driver (?)</li>
<li>Initialize security (?)</li>
<li>INIT_KEY_EX_VAULT</li>
<li>Initialize settings (?)</li>
<li>Initialize power mode</li>
<li>Initialize video driver</li>
<li>Initialize audio driver</li>
<li>Initialize boot animation<ul>
<li>Loads bootanim.xex</li>
</ul>
</li>
<li>Initialize SATA driver</li>
<li>Initialize <a href="../Shadowboot">Shadowboot</a> (not on retail
  systems)</li>
<li>INIT_DUMP_SYSTEM (?) (not on retail systems)</li>
<li>INIT_SYSTEM_ROOT (?)</li>
<li>Initialize other drivers</li>
<li>Initialize <a href="../STFS">STFS</a> driver</li>
<li>Initialize XAM</li>
</ul>
<h2 id="core-os-executables">Core OS Executables</h2>
<p>After its initialization sequence, the kernel loads the following
executables (in order)</p>
<ul>
<li>xam.xex</li>
<li>xbdm.xex</li>
<li>xstudio.xex</li>
<li>ximecore.xex</li>
<li>Xam.Community.xex (from disk)</li>
<li>huduiskin.xex</li>
<li>xshell.xex (devkits) / dash.xex (retail)</li>
</ul>
<p>It then unloads the following:</p>
<ul>
<li>huduiskin.xex</li>
<li>bootanim.xex</li>
</ul>
<p>By this time the console will have booted into the dashboard</p>
<p><a href="../Category_Xbox360_System_Software">Category:Xbox360 System Software</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.0ac82a11.min.js"></script>
      <script src="../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>